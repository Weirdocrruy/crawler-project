#coding=gbk
import requests
import re

from pyecharts import options as opts
from pyecharts.charts import Map

s=requests.session()#获取新的Cookie
url='https://ncov.dxy.cn/ncovh5/view/pneumonia'
response=s.get(url)
response.encoding='utf-8'
c=response.text
#print(c)
html=response.text
a=re.findall(re.compile(r'(\[\{.*\]\}\])'),str(c))
#print(a)
c=re.findall(re.compile(r'(\d+)'),str(a))
#print(c[259:326:4])
d=(
    Map()
    .add('疫情地图',[list(z) for z in zip(['郑州市','信阳市','南阳市','周口市','安阳市','驻马店市','漯河市','商丘市','新乡市','平顶山市','三门峡市','洛阳市','开封市','鹤壁市','许昌市','焦作市','濮阳市'],c[259:326:4])],maptype='河南')
    .set_global_opts(title_opts=opts.TitleOpts(title='丁香医生数据'),visualmap_opts=opts.VisualMapOpts(max_=10))
)
d.render_notebook()
#d=['625379', '1582892810000', '1582892810000', '2', '7', '2302', '2337', '0', '22', '13', '0', '951004', '625409', '1582892810000', '1582892810000', '2', '10', '700', '705', '0', '0', '5', '0', '0', '625392', '1582892810000', '1582892810000', '2', '10', '591', '653', '0', '45', '17', '0', '965008', '625378', '1582892810000', '1582892810000', '2', '6', '200', '226', '0', '22', '4', '0', '951002', '625434', '1582892810000', '1582892810000', '2', '10', '195', '270', '0', '49', '26', '0', '955007', '625380', '1582892810000', '1582892810000', '2', '8', '57', '60', '0', '3', '0', '0', '971002', '625471', '1582892810000', '1582892810000', '2', '10', '43', '43', '0', '0', '0', '0', '955011', '625386', '1582892810000', '1582892810000', '2', '10', '34', '48', '0', '14', '0', '0', '963003', '625472', '1582892810000', '1582892810000', '2', '10', '33', '33', '0', '0', '0', '0', '955004', '625375', '1582892810000', '1582892810000', '2', '3', '31', '93', '0', '62', '0', '0', '952009', '625377', '1582892810000', '1582892810000', '2', '5', '25', '38', '0', '11', '2', '0', '961002', '625394', '1582892810000', '1582892810000', '2', '10', '23', '25', '0', '2', '0', '0', '965015', '625389', '1582892810000', '1582892810000', '2', '10', '14', '19', '0', '5', '0', '0', '955019', '625374', '1582892810000', '1582892810000', '2', '2', '13', '41', '0', '28', '0', '0', '952010', '625384', '1582892810000', '1582892810000', '2', '10', '10', '14', '0', '4', '0', '0', '971001', '625383', '1582892810000', '1582892810000', '2', '10', '8', '23', '0', '15', '0', '0', '990001', '625476', '1582892810000', '1582892810000', '2', '10', '8', '8', '0', '0', '0', '0', '963008', '625863', '1582892811000', '1582892811000', '2', '10', '8', '16', '0', '8', '0', '0', '0', '625395', '1582892810000', '1582892810000', '2', '10', '7', '7', '0', '0', '0', '0', '962005', '625464', '1582892810000', '1582892810000', '2', '10', '7', '7', '0', '0', '0', '0', '955008', '625449', '1582892810000', '1582892810000', '2', '10', '6', '7', '0', '1', '0', '0', '955009', '625474', '1582892810000', '1582892810000', '2', '10', '6', '6', '0', '0', '0', '0', '955013', '625376', '1582892810000', '1582892810000', '2', '4', '5', '23', '0', '18', '0', '0', '952007', '625490', '1582892810000', '1582892810000', '2', '10', '5', '5', '0', '0', '0', '0', '963001', '625567', '1582892810000', '1582892810000', '2', '10', '4', '4', '0', '0', '0', '0', '965007', '625628', '1582892810000', '1582892810000', '2', '10', '4', '4', '0', '0', '0', '0', '962004', '625450', '1582892810000', '1582892810000', '2', '10', '3', '3', '0', '0', '0', '0', '955012', '625475', '1582892810000', '1582892810000', '2', '10', '3', '3', '0', '0', '0', '0', '965005', '625568', '1582892810000', '1582892810000', '2', '10', '2', '2', '0', '0', '0', '0', '953006', '625390', '1582892810000', '1582892810000', '2', '10', '1', '2', '0', '1', '0', '0', '962002', '625396', '1582892810000', '1582892810000', '2', '10', '1', '3', '0', '1', '1', '0', '952008', '625473', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '955001', '625489', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '981001', '625569', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '973003', '625624', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '965011', '625625', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '955006', '625626', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '964002', '625627', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '962001', '625629', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '0', '625669', '1582892810000', '1582892810000', '2', '10', '1', '1', '0', '0', '0', '0', '961006', '625858', '1582892811000', '1582892811000', '2', '10', '1', '1', '0', '0', '0', '0', '982013', '625859', '1582892811000', '1582892811000', '2', '10', '1', '1', '0', '0', '0', '0', '964004', '625860', '1582892811000', '1582892811000', '2', '10', '1', '1', '0', '0', '0', '0', '990007', '625861', '1582892811000', '1582892811000', '2', '10', '1', '1', '0', '0', '0', '0', '964001', '625381', '1582892810000', '1582892810000', '2', '9', '0', '16', '0', '16', '0', '0', '952011', '625382', '1582892810000', '1582892810000', '2', '10', '0', '1', '0', '1', '0', '0', '953005', '625385', '1582892810000', '1582892810000', '2', '10', '0', '1', '0', '1', '0', '0', '952003', '625387', '1582892810000', '1582892810000', '2', '10', '0', '1', '0', '1', '0', '0', '953007', '625391', '1582892810000', '1582892810000', '2', '10', '0', '3', '0', '3', '0', '0', '953003', '625393', '1582892810000', '1582892810000', '2', '10', '0', '2', '0', '2', '0', '0', '964006', '625407', '1582892810000', '1582892810000', '2', '10', '0', '1', '0', '1', '0', '0', '961001', '625408', '1582892810000', '1582892810000', '2', '10', '0', '1', '0', '1', '0', '0', '981002', '36829', '65914', '0', '26403', '2682', '420000', '1', '2020', '0223', '618', '3398299751673487511', '135', '30179', '48137', '0', '15826', '2132', '420100', '1608', '3517', '0', '1795', '114', '420900', '749', '2904', '0', '2041', '114', '421100', '661', '1389', '0', '685', '43', '420700', '620', '1579', '0', '913', '46', '421000', '529', '1307', '0', '740', '38', '421300', '471', '931', '0', '429', '31', '420500', '390', '1175', '0', '753', '32', '420600', '353', '924', '0', '534', '37', '420800', '327', '1013', '0', '653', '33', '420200', '276', '671', '0', '389', '6', '420300', '181', '836', '0', '644', '11', '421200', '168', '575', '0', '388', '19', '429004', '151', '496', '0', '332', '13', '429006', '90', '198', '0', '99', '9', '429005', '75', '251', '0', '172', '4', '422800', '1', '11', '0', '10', '0', '429021', '406', '1348', '0', '935', '7', '440000', '1', '2020', '0223', '281', '3398299758115524068', '135', '133', '417', '0', '281', '3', '440300', '105', '346', '0', '240', '1', '440100', '42', '98', '0', '55', '1', '441900', '37', '84', '0', '47', '0', '440600', '34', '98', '0', '63', '1', '440400', '10', '23', '0', '13', '0', '440700', '8', '66', '0', '58', '0', '442000', '7', '62', '0', '55', '0', '441300', '5', '22', '0', '17', '0', '440800', '5', '19', '0', '13', '1', '441200', '5', '14', '0', '9', '0', '440900', '4', '16', '0', '12', '0', '441400', '4', '14', '0', '10', '0', '441700', '3', '25', '0', '22', '0', '440500', '3', '8', '0', '5', '0', '445200', '1', '10', '0', '9', '0', '440200', '0', '12', '0', '12', '0', '441800', '0', '5', '0', '5', '0', '441500', '0', '5', '0', '5', '0', '445100', '0', '4', '0', '4', '0', '441600', '345', '756', '0', '405', '6', '370000', '1', '2020', '0223', '601', '3398299749526003726', '135', '213', '258', '0', '45', '0', '370800', '22', '47', '0', '25', '0', '370100', '18', '37', '0', '17', '2', '371400', '17', '47', '0', '30', '0', '370600', '17', '44', '0', '27', '0', '370700', '14', '60', '0', '45', '1', '370200', '10', '38', '0', '28', '0', '371000', '8', '30', '0', '21', '1', '370300', '7', '35', '0', '26', '2', '370900', '5', '38', '0', '33', '0', '371500', '4', '49', '0', '45', '0', '371300', '4', '16', '0', '12', '0', '371100', '3', '15', '0', '12', '0', '371600', '2', '24', '0', '22', '0', '370400', '1', '18', '0', '17', '0', '371700', '229', '1205', '0', '975', '1', '330000', '1', '2020', '0223', '537', '3398299755968455045', '135', '98', '504', '0', '405', '1', '330300', '40', '146', '0', '106', '0', '331000', '31', '36', '0', '5', '0', '0', '19', '157', '0', '138', '0', '330200', '18', '169', '0', '151', '0', '330100', '11', '45', '0', '34', '0', '330400', '6', '42', '0', '36', '0', '330600', '5', '55', '0', '50', '0', '330700', '3', '14', '0', '11', '0', '330800', '3', '10', '0', '7', '0', '330900', '1', '10', '0', '9', '0', '330500', '0', '17', '0', '17', '0', '331100', '6', '0', '0', '6', '0', '0', '197', '538', '0', '338', '3', '510000', '1', '2020', '0223', '926', '3398299755968455035', '135', '55', '143', '0', '85', '3', '510100', '55', '78', '0', '23', '0', '513300', '16', '42', '0', '26', '0', '511700', '16', '39', '0', '23', '0', '511300', '13', '24', '0', '11', '0', '511900', '8', '18', '0', '10', '0', '510600', '7', '30', '0', '23', '0', '511600', '7', '22', '0', '15', '0', '510700', '4', '24', '0', '20', '0', '510500', '4', '22', '0', '18', '0', '511000', '3', '13', '0', '10', '0', '513400', '2', '17', '0', '15', '0', '510900', '2', '12', '0', '10', '0', '511500', '2', '8', '0', '6', '0', '511400', '2', '4', '0', '2', '0', '512000', '1', '7', '0', '6', '0', '511800', '0', '16', '0', '16', '0', '510400', '0', '9', '0', '9', '0', '510300', '0', '6', '0', '6', '0', '510800', '0', '3', '0', '3', '0', '511100', '0', '1', '0', '1', '0', '513200', '184', '480', '0', '283', '13', '230000', '1', '2020', '0223', '643', '3398299753820971199', '135', '109', '198', '0', '85', '4', '230100', '17', '52', '0', '32', '3', '230500', '17', '46', '0', '29', '0', '230300', '9', '43', '0', '33', '1', '230200', '9', '26', '0', '16', '1', '230600', '8', '47', '0', '35', '4', '231200', '5', '14', '0', '9', '0', '231100', '5', '14', '0', '9', '0', '231000', '4', '17', '0', '13', '0', '230900', '1', '5', '0', '4', '0', '230400', '0', '15', '0', '15', '0', '230800', '0', '2', '0', '2', '0', '232700', '0', '1', '0', '1', '0', '230700', '183', '1017', '0', '830', '4', '430000', '1', '2020', '0223', '440', '3398299751673072079', '135', '68', '242', '0', '172', '2', '430100', '42', '156', '0', '113', '1', '430600', '18', '80', '0', '62', '0', '430200', '16', '76', '0', '60', '0', '431300', '10', '82', '0', '72', '0', '430700', '10', '48', '0', '38', '0', '430400', '8', '102', '0', '93', '1', '430500', '5', '39', '0', '34', '0', '431000', '3', '36', '0', '33', '0', '430300', '2', '44', '0', '42', '0', '431100', '1', '59', '0', '58', '0', '430900', '0', '40', '0', '40', '0', '431200', '0', '8', '0', '8', '0', '433100', '0', '5', '0', '5', '0', '430800', '168', '576', '0', '402', '6', '500000', '1', '2020', '0223', '368', '3398299751673487486', '135']
#print(len(d))